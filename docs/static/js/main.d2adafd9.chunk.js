(this["webpackJsonpfrontend-app"]=this["webpackJsonpfrontend-app"]||[]).push([[0],{188:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(37),c=n.n(s),o=(n(188),n(178)),i=n(28),l=n(31),d=n.n(l),j=n(44),u=n(70),b=n.n(u),p=n(56),m=n(1),h=n(6),x=n(291),O=n(293),f=n(85),v=n(52),y=n(292),g=n(59),w="ALL_DEPLOYMENTS",N="DELETE_DEPLOYMENT",D="ADD_DEPLOYMENT",E=function(e){return{payload:e,type:w}},L=function(e){return{payload:e,type:N}},k=n(12),C=function(){var e=Object(a.useState)({name:"",versions:[],url:"",deploymentDate:null}),t=Object(h.a)(e,2),n=t[0],r=t[1],s=function(){r({name:"",versions:[],url:"",deploymentDate:null})},c=Object(a.useState)({show:!1,msg:""}),o=Object(h.a)(c,2),i=o[0],l=o[1],u=Object(p.b)(),w=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],""===n.name&&t.push("Name should not be empty"),""===n.url&&t.push("Url should not be empty"),0===n.versions.length&&t.push("Add atleast one version"),0!==t.length){e.next=17;break}return e.prev=5,e.next=8,b.a.post("/deployment/create",n);case 8:(a=e.sent).data.result?(r=a.data.data,u({payload:r,type:D}),s()):l({show:!0,msg:a.data.msg}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),l({show:!0,msg:"There was some network issue"});case 15:e.next=18;break;case 17:l({show:!0,msg:t.join(" || ")});case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"mt-6",children:Object(k.jsxs)(x.a,{children:[Object(k.jsx)("div",{className:"text-xl mb-3",children:"Add a new deployment"}),i.show&&Object(k.jsx)(O.a,{message:i.msg,closable:!0,onClose:function(){return l({show:!1,msg:""})},type:"error"}),Object(k.jsxs)("div",{className:"w-full",children:[Object(k.jsxs)(f.a,{children:[Object(k.jsxs)(v.a,{className:"m-2",children:[Object(k.jsx)("div",{className:"text-xs",children:"Name"}),Object(k.jsx)(y.a,{value:n.name,onChange:function(e){r(Object(m.a)(Object(m.a)({},n),{},{name:e.target.value}))},placeholder:"Name"})]}),Object(k.jsxs)(v.a,{className:"m-2",children:[Object(k.jsxs)("div",{className:"text-xs",children:["Version (use comma to seprate versions)"," "]}),Object(k.jsx)(y.a,{value:n.versions.join(","),onChange:function(e){r(Object(m.a)(Object(m.a)({},n),{},{versions:e.target.value.split(",")}))},type:"version",placeholder:"Version"})]}),Object(k.jsxs)(v.a,{className:"m-2",children:[Object(k.jsx)("div",{className:"text-xs",children:"Deployment date"}),Object(k.jsx)(y.a,{onChange:function(e){r(Object(m.a)(Object(m.a)({},n),{},{deploymentDate:new Date(e.target.value)}))},type:"date",placeholder:"Deployment date"})]}),Object(k.jsxs)(v.a,{className:"m-2",children:[Object(k.jsx)("div",{className:"text-xs",children:"Url"}),Object(k.jsx)(y.a,{value:n.url,onChange:function(e){r(Object(m.a)(Object(m.a)({},n),{},{url:e.target.value}))},type:"url",placeholder:"Url"})]})]}),Object(k.jsxs)("div",{className:"m-3 space-x-3",children:[Object(k.jsx)(g.a,{onClick:function(){return w()},type:"primary",children:"Add Deployment"}),Object(k.jsx)(g.a,{onClick:function(){return s()},danger:!0,children:"Clear"})]})]})]})})},A=n(290),T=n(181),I=n(294),S=function(e){return"".concat(e.toDateString())},M=A.a.Column,P=function(){var e=Object(p.c)((function(e){return e.deployments})),t=Object(p.b)();if(e.isError)return Object(k.jsx)("h1",{children:"There was some error"});if(e.isLoading)return Object(k.jsx)("h1",{children:"Loading .."});var n=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/deployment/delete",{id:n});case 3:e.sent.data.result?t(L(n)):T.a.error({message:"There was some issue during deleting the deployment."}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),T.a.error({message:"There was some issue during deleting the deployment."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(x.a,{className:"mt-6 overflow-x-auto",children:[Object(k.jsx)("div",{className:"text-xl mb-3",children:"All deployments"}),Object(k.jsxs)(A.a,{loading:e.isLoading,pagination:!1,dataSource:e.data,children:[Object(k.jsx)(M,{title:"Name",dataIndex:"name"},"name"),Object(k.jsx)(M,{title:"Url",dataIndex:"url"},"url"),Object(k.jsx)(M,{title:"Date",dataIndex:"deployedAt",render:function(e){return Object(k.jsx)("div",{children:S(new Date(e))})}},"deployedAt"),Object(k.jsx)(M,{title:"Versions",dataIndex:"versions",render:function(e){return Object(k.jsx)("div",{children:e.map((function(e){return Object(k.jsx)(I.a,{children:e},Math.random())}))})}},"versions"),Object(k.jsx)(M,{title:"Actions",dataIndex:"_id",render:function(e){return Object(k.jsx)("div",{children:Object(k.jsx)(g.a,{onClick:function(){return n(e)},type:"primary",danger:!0,children:"Delete"})})}})]})]})},_=function(){return Object(k.jsx)("div",{className:"w-full p-6 text-2xl border-b-2 border-gray-100 bg-white",children:"Deployment App"})},F=function(){var e=Object(p.b)(),t=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("/deployment/all");case 3:(n=t.sent).data.result?e(E({isLoading:!1,isError:!1,data:n.data.data})):E({isLoading:!1,isError:!0,data:[]}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),E({isLoading:!1,isError:!0,data:[]});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){t()}),[]),Object(k.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[Object(k.jsx)(_,{}),Object(k.jsxs)("div",{className:"mx-3 md:mx-24",children:[Object(k.jsx)(C,{}),Object(k.jsx)(P,{})]})]})};var U=function(){return Object(k.jsx)(o.a,{children:Object(k.jsx)(i.c,{children:Object(k.jsx)(i.a,{path:"/",exact:!0,component:F})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,295)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},Y=n(175),B=n(8),J={deployments:{isError:!1,isLoading:!1,data:[]}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(m.a)(Object(m.a)({},e),{},{deployments:t.payload});case D:return Object(m.a)(Object(m.a)({},e),{},{deployments:Object(m.a)(Object(m.a)({},e.deployments),{},{data:[].concat(Object(B.a)(e.deployments.data),[t.payload])})});case N:return Object(m.a)(Object(m.a)({},e),{},{deployments:Object(m.a)(Object(m.a)({},e.deployments),{},{data:e.deployments.data.filter((function(e){return e._id!==t.payload}))})});default:return e}},z=Object(Y.a)(q);c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(p.a,{store:z,children:Object(k.jsx)(U,{})})}),document.getElementById("root")),V()}},[[288,1,2]]]);
//# sourceMappingURL=main.d2adafd9.chunk.js.map